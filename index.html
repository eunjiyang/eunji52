<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initaial-scale=1.0">
    <meta charset="UTF-8">
    <title>은지 홈페이지</title>
    <link href="css/common.css" rel="stylesheet">
    <link href="css/main.css" rel="stylesheet">
</head>
<body>
    <audio id="player" autoplay="1" loop="-1" controls="" volume="-200" style="display: none">
        <source src="./peppertones.mp3" type="audio/mp3">
    </audio>
    <iframe id="iframe" name="iframe_main" src="./home.html" style="height:940px; width: 1920px" frameborder="no" scrolling="yes"></iframe>
    <script src="js/jquery-1.12.4.js"></script>
    <script>
        /*
        $(document).ready(function(){
            console.log('play');
            var audio = $('#player')[0];
            audio.play();
            $('#iframe')[0].contentWindow.postMessage('on', '*');
        });
        */
        window.addEventListener('message', function(e) {
            var audio = $('#player')[0];
            switch(e.data) {
                case 'music_check' : 
                    if(audio.paused) {
                        $('#iframe')[0].contentWindow.postMessage('off', '*');
                    } else {
                        $('#iframe')[0].contentWindow.postMessage('on', '*');
                    }
                    break;
                case 'music' :
                    if(audio.paused) {
                        $('#iframe')[0].contentWindow.postMessage('on', '*');
                       audio.play();
                    } else {
                        $('#iframe')[0].contentWindow.postMessage('off', '*');
                       audio.pause();
                    }
                    break;
            }
        });
    </script>
</body>
</html>